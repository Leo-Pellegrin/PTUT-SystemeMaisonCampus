import{a as q}from"./axios-4d564c32.js";import{_ as A}from"./VGrid-42409ed8.js";import{V as y,a as h,b as p,c as R}from"./VSheet-defdcf29.js";import{b as u,d as T,r as N,o as S,a as H,w as e,c as t,e as o,t as D,f as P,h as Z}from"./index-0cf8a666.js";const c=i=>(P("data-v-dd359a5b"),i=i(),Z(),i),G=c(()=>o("p",{class:"mx-auto pt-5 text-h6 text-#102C59"},"Occupation globale",-1)),M={class:"mx-auto text-h3 mt-5 font-weight-bold"},$=c(()=>o("p",{class:"pb-5 text-h6"},"personnes",-1)),z=c(()=>o("p",{class:"mx-auto pt-5 text-h6"},"Occupation bibliothèque",-1)),J={class:"mx-auto text-h3 mt-5 font-weight-bold"},K=c(()=>o("p",{class:"pb-5 text-h6"},"personnes",-1)),L=c(()=>o("p",{class:"mx-auto pt-5 mx-5 text-h6 overflow-auto"},"Occupations des salles de travail",-1)),Q={class:"mx-auto text-h3 mt-5 font-weight-bold"},U=c(()=>o("p",{class:"pb-5 text-h6"},"personnes",-1)),W={class:"d-flex justify-center align-center fill-height"},X={id:"chart",class:"mt-2"},Y={class:"d-flex justify-center align-center fill-height"},tt={id:"chart",class:"mt-2"},et={__name:"HomeComponent",setup(i){const m={chart:{id:"vuechart-example",type:"bar"},grid:{show:!1},xaxis:{categories:["8h-9h","9h-10h","10h-11h","11h-12h","12h-13h","13h-14h","14h-15h","15h-16h","16h-17h","17h-18h"]},responsive:[{breakpoint:1650,options:{chart:{width:"1400",height:"300",dropShadow:{enabled:!0,color:"#000",top:18,left:7,blur:10,opacity:.2}}}},{breakpoint:1450,options:{chart:{width:"1200",height:"300"}}},{breakpoint:1250,options:{chart:{width:"1000",height:"300"}}},{breakpoint:1050,options:{chart:{width:"800",height:"300"}}}]},_=u([{data:[0,0,0,0,0,0,0,0,0,0],backgroundColor:"#0F2C59",name:"Occupation"}]),f=u([{data:[0,0,0,0,0,0,0,0,0,0],backgroundColor:"#265073",name:"Occupation globale"},{data:[0,0,0,0,0,0,0,0,0,0],backgroundColor:"#2D9596",name:"Occupation bibliothèque"},{data:[0,0,0,0,0,0,0,0,0,0],backgroundColor:"#9AD0C2",name:"Occupation salles de travail"}]),F=u(0),C=u(0),O=u(0),r=[{start:"08:00",end:"09:00"},{start:"09:00",end:"10:00"},{start:"10:00",end:"11:00"},{start:"11:00",end:"12:00"},{start:"12:00",end:"13:00"},{start:"13:00",end:"14:00"},{start:"14:00",end:"15:00"},{start:"15:00",end:"16:00"},{start:"16:00",end:"17:00"},{start:"17:00",end:"18:00"}];T(()=>{B()});async function B(){const x=new Date,b=new Date(x);b.setHours(0,0,0,0);const n=new Date(x);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);let g=b.toISOString(),v=n.toISOString();g=g.slice(0,-9)+".000Z",v=v.slice(0,-9)+".000Z",await q.get("https://ptut-ptutcomptagemaisoncampus.koyeb.app/etablissement/2/passage/periode?dateDebut="+g+"&dateFin="+v).then(w=>{const d={};w.data.forEach(a=>{const s=a.nomsalle,V=new Date(a.datepassage),E=a.nbpersonne;d[s]||(d[s]=[]),d[s].push({date:V,nbpersonne:E});const k=new Date(a.datepassage).getHours();r.forEach(l=>{const I=l.start.split(":"),j=l.end.split(":");k>=I[0]&&k<j[0]&&(_.value[0].data[r.indexOf(l)]+=a.nbpersonne,f.value[0].data[r.indexOf(l)]+=a.nbpersonne,a.nomsalle==="Bibliothèque"?f.value[1].data[r.indexOf(l)]+=a.nbpersonne:f.value[2].data[r.indexOf(l)]+=a.nbpersonne)})});for(const a in d){const s=d[a];s[s.length-1],a=="Bibliothèque"?C.value=s[0].nbpersonne:O.value+=s[0].nbpersonne,F.value+=s[0].nbpersonne}console.log(_.value[0].data)}).catch(w=>{console.error(w)})}return(x,b)=>{const n=N("apexchart");return S(),H(R,{fluid:"",class:""},{default:e(()=>[t(y,{"no-gutters":"",class:"d-flex justify-space-evenly"},{default:e(()=>[t(h,{cols:"3"},{default:e(()=>[t(p,{class:"fill-heigh text-center",color:"#F8F0E5",rounded:"xl",elevation:8},{default:e(()=>[G,o("p",M,D(F.value),1),$]),_:1})]),_:1}),t(h,{cols:"3"},{default:e(()=>[t(p,{class:"fill-heigh text-center",color:"#F8F0E5",rounded:"xl",elevation:8},{default:e(()=>[z,o("p",J,D(C.value),1),K]),_:1})]),_:1}),t(h,{cols:"3"},{default:e(()=>[t(p,{class:"fill-heigh text-center",color:"#F8F0E5",rounded:"xl",elevation:8},{default:e(()=>[L,o("p",Q,D(O.value),1),U]),_:1})]),_:1})]),_:1}),t(y,{"no-gutters":"",class:"d-flex justify-space-evenly mt-10"},{default:e(()=>[t(h,{class:"mx-10"},{default:e(()=>[t(p,{class:"fill-height",color:"#F8F0E5",rounded:"xl",elevation:8},{default:e(()=>[o("div",W,[o("div",X,[t(n,{width:"1600",height:"300",type:"bar",options:m,series:_.value},null,8,["series"])])])]),_:1})]),_:1})]),_:1}),t(y,{"no-gutters":"",class:"d-flex justify-space-evenly mt-10"},{default:e(()=>[t(h,{class:"mx-10"},{default:e(()=>[t(p,{class:"fill-height",color:"#F8F0E5",rounded:"xl",elevation:8},{default:e(()=>[o("div",Y,[o("div",tt,[t(n,{width:"1600",height:"300",type:"bar",options:m,series:f.value},null,8,["series"])])])]),_:1})]),_:1})]),_:1})]),_:1})}}},ot=A(et,[["__scopeId","data-v-dd359a5b"]]),it={__name:"HomeView",setup(i){return(m,_)=>(S(),H(ot))}};export{it as default};
